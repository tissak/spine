<!DOCTYPE html>  <html> <head>   <title>spine.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="ajax.html">                 ajax.coffee               </a>                                           <a class="source" href="list.html">                 list.coffee               </a>                                           <a class="source" href="local.html">                 local.coffee               </a>                                           <a class="source" href="manager.html">                 manager.coffee               </a>                                           <a class="source" href="relation.html">                 relation.coffee               </a>                                           <a class="source" href="route.html">                 route.coffee               </a>                                           <a class="source" href="spine.html">                 spine.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               spine.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Events</h2>

<p>An object that provides event usage.
If you extend events you will be given access to binding and calling events.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Events =</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Bind the event name (String) to a callback (Function)</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">bind: </span><span class="nf">(ev, callback) -&gt;</span>
    <span class="nv">evs   = </span><span class="nx">ev</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span>
    <span class="nv">calls = </span><span class="nx">@hasOwnProperty</span><span class="p">(</span><span class="s">&#39;_callbacks&#39;</span><span class="p">)</span> <span class="o">and</span> <span class="nx">@_callbacks</span> <span class="o">or=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">evs</span>
      <span class="nx">calls</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">or=</span> <span class="p">[]</span>
      <span class="nx">calls</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
    <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>A one time binding that will detatch itself after the first time it is called.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">one: </span><span class="nf">(ev, callback) -&gt;</span>
    <span class="nx">@bind</span> <span class="nx">ev</span><span class="p">,</span> <span class="o">-&gt;</span>
      <span class="nx">@unbind</span><span class="p">(</span><span class="nx">ev</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)</span>
      <span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Trigger a specific event. The first argument will be the event name followed by
a series of values you wish to pass to any bound callbacks</p>

<pre><code>@bind('refresh', function(a,b){})
@trigger('refresh', 1, 2)
</code></pre>

<p>will call the anonymous fuctoin with a=1, b=2</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">trigger: </span><span class="nf">(args...) -&gt;</span>
    <span class="nv">ev = </span><span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span>

    <span class="nv">list = </span><span class="nx">@hasOwnProperty</span><span class="p">(</span><span class="s">&#39;_callbacks&#39;</span><span class="p">)</span> <span class="o">and</span> <span class="nx">@_callbacks</span><span class="o">?</span><span class="p">[</span><span class="nx">ev</span><span class="p">]</span>
    <span class="k">return</span> <span class="nx">unless</span> <span class="nx">list</span>

    <span class="k">for</span> <span class="nx">callback</span> <span class="k">in</span> <span class="nx">list</span>
      <span class="k">if</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="o">is</span> <span class="kc">false</span>
        <span class="k">break</span>
    <span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Unbind will look for a matching event and callback paring and detatch them.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">unbind: </span><span class="nf">(ev, callback) -&gt;</span>
    <span class="nx">unless</span> <span class="nx">ev</span>
      <span class="vi">@_callbacks = </span><span class="p">{}</span>
      <span class="k">return</span> <span class="k">this</span>

    <span class="nv">list = </span><span class="nx">@_callbacks</span><span class="o">?</span><span class="p">[</span><span class="nx">ev</span><span class="p">]</span>
    <span class="k">return</span> <span class="k">this</span> <span class="nx">unless</span> <span class="nx">list</span>

    <span class="nx">unless</span> <span class="nx">callback</span>
      <span class="k">delete</span> <span class="nx">@_callbacks</span><span class="p">[</span><span class="nx">ev</span><span class="p">]</span>
      <span class="k">return</span> <span class="k">this</span>

    <span class="k">for</span> <span class="nx">cb</span><span class="p">,</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">list</span> <span class="k">when</span> <span class="nx">cb</span> <span class="o">is</span> <span class="nx">callback</span>
      <span class="nv">list = </span><span class="nx">list</span><span class="p">.</span><span class="nx">slice</span><span class="p">()</span>
      <span class="nx">list</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
      <span class="nx">@_callbacks</span><span class="p">[</span><span class="nx">ev</span><span class="p">]</span> <span class="o">=</span> <span class="nx">list</span>
      <span class="k">break</span>
    <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <h2>Log</h2>

<p>An object that provides logging functionality.
It looks for the availablility of console.log and will not error if unavailable.
When mixed into classes the logPrefix can be overridden to provide context for the log messages.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Log =</span>
  <span class="nv">trace: </span><span class="kc">true</span>

  <span class="nv">logPrefix: </span><span class="s">&#39;(App)&#39;</span>

  <span class="nv">log: </span><span class="nf">(args...) -&gt;</span>
    <span class="k">return</span> <span class="nx">unless</span> <span class="nx">@trace</span>
    <span class="k">if</span> <span class="nx">@logPrefix</span> <span class="k">then</span> <span class="nx">args</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">@logPrefix</span><span class="p">)</span>
    <span class="nx">console</span><span class="o">?</span><span class="p">.</span><span class="nx">log</span><span class="o">?</span><span class="p">(</span><span class="nx">args</span><span class="p">...)</span>
    <span class="k">this</span>

<span class="nv">moduleKeywords = </span><span class="p">[</span><span class="s">&#39;included&#39;</span><span class="p">,</span> <span class="s">&#39;extended&#39;</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <h2>Module</h2>

<p>A base module providing internal <em>include</em> and <em>extend</em> support along with JavaScript scope
altering proxy methods.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Module</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Provides a mechanism for copying in functionality from the provided object to the
current object. This builds functionality <em>into the prototype</em> of the current class.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@include: </span><span class="nf">(obj) -&gt;</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s">&#39;include(obj) requires obj&#39;</span><span class="p">)</span> <span class="nx">unless</span> <span class="nx">obj</span>
    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">obj</span> <span class="k">when</span> <span class="nx">key</span> <span class="o">not</span> <span class="k">in</span> <span class="nx">moduleKeywords</span>
      <span class="nx">@</span><span class="o">::</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>
    <span class="nx">obj</span><span class="p">.</span><span class="nx">included</span><span class="o">?</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
    <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Provides a mechanism for copying in functionality from the provided object to the
current object. This builds functionality <em>into the instance</em> of the current class.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@extend: </span><span class="nf">(obj) -&gt;</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s">&#39;extend(obj) requires obj&#39;</span><span class="p">)</span> <span class="nx">unless</span> <span class="nx">obj</span>
    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">obj</span> <span class="k">when</span> <span class="nx">key</span> <span class="o">not</span> <span class="k">in</span> <span class="nx">moduleKeywords</span>
      <span class="nx">@</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>
    <span class="nx">obj</span><span class="p">.</span><span class="nx">extended</span><span class="o">?</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
    <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Provides a mechanism for forcing scope. Using a closure any provided function will be
called with the 'this' scope set to the instance of the current class. Good to avoid issues
such as DOM events setting the scope to window.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@proxy: </span><span class="nf">(func) -&gt;</span>
    <span class="o">=&gt;</span> <span class="nx">func</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Instance representation of the class level 'proxy' method.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">proxy: </span><span class="nf">(func) -&gt;</span>
    <span class="o">=&gt;</span> <span class="nx">func</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>

  <span class="nv">constructor: </span><span class="o">-&gt;</span>
    <span class="nx">@init</span><span class="o">?</span><span class="p">(</span><span class="nx">arguments</span><span class="p">...)</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <h2>Model</h2>

<p>Provides the base class that all <em>models</em> are to extend from.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Model</span> <span class="k">extends</span> <span class="nx">Module</span>
  <span class="nx">@extend</span> <span class="nx">Events</span>

  <span class="vi">@records: </span><span class="p">{}</span>
  <span class="vi">@crecords: </span><span class="p">{}</span>
  <span class="vi">@attributes: </span><span class="p">[]</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Class method for defining how a model should exist.
The first <em>name</em> argument is the internal representation and the remaining
arguments describe the expected internal attributes.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@configure: </span><span class="nf">(name, attributes...) -&gt;</span>
    <span class="vi">@className  = </span><span class="nx">name</span>
    <span class="vi">@records    = </span><span class="p">{}</span>
    <span class="vi">@crecords   = </span><span class="p">{}</span>
    <span class="vi">@attributes = </span><span class="nx">attributes</span> <span class="k">if</span> <span class="nx">attributes</span><span class="p">.</span><span class="nx">length</span>
    <span class="nx">@attributes</span> <span class="o">and=</span> <span class="nx">makeArray</span><span class="p">(</span><span class="nx">@attributes</span><span class="p">)</span>
    <span class="nx">@attributes</span> <span class="o">or=</span>  <span class="p">[]</span>
    <span class="nx">@unbind</span><span class="p">()</span>
    <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Class method describing model name and attributes</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@toString: </span><span class="o">-&gt;</span> <span class="s">&quot;</span><span class="si">#{</span><span class="nx">@className</span><span class="si">}</span><span class="s">(</span><span class="si">#{</span><span class="nx">@attributes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">)</span><span class="si">}</span><span class="s">)&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Finder method that will find a model record based on it's ID.
_Note - this will attempt a direct ID match and then a clientside (CID) match.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@find: </span><span class="nf">(id) -&gt;</span>
    <span class="nv">record = </span><span class="nx">@records</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
    <span class="k">if</span> <span class="o">!</span><span class="nx">record</span> <span class="o">and</span> <span class="p">(</span><span class="s">&quot;</span><span class="si">#{</span><span class="nx">id</span><span class="si">}</span><span class="s">&quot;</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/c-\d+/</span><span class="p">)</span>
      <span class="k">return</span> <span class="nx">@findCID</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s">&#39;Unknown record&#39;</span><span class="p">)</span> <span class="nx">unless</span> <span class="nx">record</span>
    <span class="nx">record</span><span class="p">.</span><span class="nx">clone</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Finder method that will use the client side ID for matching.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@findCID: </span><span class="nf">(cid) -&gt;</span>
    <span class="nv">record = </span><span class="nx">@crecords</span><span class="p">[</span><span class="nx">cid</span><span class="p">]</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s">&#39;Unknown record&#39;</span><span class="p">)</span> <span class="nx">unless</span> <span class="nx">record</span>
    <span class="nx">record</span><span class="p">.</span><span class="nx">clone</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Helper returning a record if it is found or false if not</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@exists: </span><span class="nf">(id) -&gt;</span>
    <span class="k">try</span>
      <span class="k">return</span> <span class="nx">@find</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span>
    <span class="k">catch</span> <span class="nx">e</span>
      <span class="k">return</span> <span class="kc">false</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Class method for refreshing a models data content using the values argument.
If the options argument has the value clear set to true it will first remove all records.
The event <em>refresh</em> is triggered on the model after the model records have been built.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@refresh: </span><span class="nf">(values, options = {}) -&gt;</span>
    <span class="k">if</span> <span class="nx">options</span><span class="p">.</span><span class="nx">clear</span>
      <span class="vi">@records  = </span><span class="p">{}</span>
      <span class="vi">@crecords = </span><span class="p">{}</span>

    <span class="nv">records = </span><span class="nx">@fromJSON</span><span class="p">(</span><span class="nx">values</span><span class="p">)</span>
    <span class="nv">records = </span><span class="p">[</span><span class="nx">records</span><span class="p">]</span> <span class="nx">unless</span> <span class="nx">isArray</span><span class="p">(</span><span class="nx">records</span><span class="p">)</span>

    <span class="k">for</span> <span class="nx">record</span> <span class="k">in</span> <span class="nx">records</span>
      <span class="nx">record</span><span class="p">.</span><span class="nx">id</span>           <span class="o">or=</span> <span class="nx">record</span><span class="p">.</span><span class="nx">cid</span>
      <span class="nx">@records</span><span class="p">[</span><span class="nx">record</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span>   <span class="o">=</span> <span class="nx">record</span>
      <span class="nx">@crecords</span><span class="p">[</span><span class="nx">record</span><span class="p">.</span><span class="nx">cid</span><span class="p">]</span> <span class="o">=</span> <span class="nx">record</span>

    <span class="nx">@trigger</span><span class="p">(</span><span class="s">&#39;refresh&#39;</span><span class="p">,</span> <span class="nx">@cloneArray</span><span class="p">(</span><span class="nx">records</span><span class="p">))</span>
    <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Selectes a portion of model records using a callback to determine which. The callback should
return true or false based on the individual record being tested.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@select: </span><span class="nf">(callback) -&gt;</span>
    <span class="nv">result = </span><span class="p">(</span><span class="nx">record</span> <span class="k">for</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">record</span> <span class="k">of</span> <span class="nx">@records</span> <span class="k">when</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">record</span><span class="p">))</span>
    <span class="nx">@cloneArray</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Finds the firswt matching model record where the argument <em>name</em> (which is the attribute name) matches the
provided <em>value</em> argument.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@findByAttribute: </span><span class="nf">(name, value) -&gt;</span>
    <span class="k">for</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">record</span> <span class="k">of</span> <span class="nx">@records</span>
      <span class="k">if</span> <span class="nx">record</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">is</span> <span class="nx">value</span>
        <span class="k">return</span> <span class="nx">record</span><span class="p">.</span><span class="nx">clone</span><span class="p">()</span>
    <span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Finds all model records where the argument <em>name</em> (which is the attribute name) matches the
provided <em>value</em> argument.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@findAllByAttribute: </span><span class="nf">(name, value) -&gt;</span>
    <span class="nx">@select</span> <span class="nf">(item) -&gt;</span>
      <span class="nx">item</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">is</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Helper method for looping over all model records applying the provided calback function to each record.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@each: </span><span class="nf">(callback) -&gt;</span>
    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">@records</span>
      <span class="nx">callback</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">clone</span><span class="p">())</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Helper method that provides all model records.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@all: </span><span class="o">-&gt;</span>
    <span class="nx">@cloneArray</span><span class="p">(</span><span class="nx">@recordsValues</span><span class="p">())</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Helper method that provides the first model record.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@first: </span><span class="o">-&gt;</span>
    <span class="nv">record = </span><span class="nx">@recordsValues</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nx">record</span><span class="o">?</span><span class="p">.</span><span class="nx">clone</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Helper method that provides the last model record.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@last: </span><span class="o">-&gt;</span>
    <span class="nv">values = </span><span class="nx">@recordsValues</span><span class="p">()</span>
    <span class="nv">record = </span><span class="nx">values</span><span class="p">[</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="nx">record</span><span class="o">?</span><span class="p">.</span><span class="nx">clone</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Helper method that provides a numerical count of the total number of model records.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@count: </span><span class="o">-&gt;</span>
    <span class="nx">@recordsValues</span><span class="p">().</span><span class="nx">length</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Will delete all model records without callbacks</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@deleteAll: </span><span class="o">-&gt;</span>
    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">@records</span>
      <span class="k">delete</span> <span class="nx">@records</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Will delete all model records, applying the destroy callback on each record as it is removed.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@destroyAll: </span><span class="o">-&gt;</span>
    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">@records</span>
      <span class="nx">@records</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">destroy</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Will update a particular record noted by the <em>id</em> attribute</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@update: </span><span class="nf">(id, atts, options) -&gt;</span>
    <span class="nx">@find</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">updateAttributes</span><span class="p">(</span><span class="nx">atts</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Create and save a new record with the passed attributes.
If options.validate is false the validation will be skipped.
If an error occurs the <em>error</em> event will be triggered.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@create: </span><span class="nf">(atts, options) -&gt;</span>
    <span class="nv">record = </span><span class="k">new</span> <span class="nx">@</span><span class="p">(</span><span class="nx">atts</span><span class="p">)</span>
    <span class="nx">record</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Call <em>destroy</em> on a model record found by the provided <em>id</em>.
The provided options will be passed to the <em>beforeDestroy</em>, <em>destroy</em> and <em>change</em> events.
The model will then be unbound from all events.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@destroy: </span><span class="nf">(id, options) -&gt;</span>
    <span class="nx">@find</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">destroy</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>A helper to bind the provided callback to the <em>change</em> event of this model or if
no callback is provided it will trigger the event.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@change: </span><span class="nf">(callbackOrParams) -&gt;</span>
    <span class="k">if</span> <span class="k">typeof</span> <span class="nx">callbackOrParams</span> <span class="o">is</span> <span class="s">&#39;function&#39;</span>
      <span class="nx">@bind</span><span class="p">(</span><span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="nx">callbackOrParams</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="nx">@trigger</span><span class="p">(</span><span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="nx">callbackOrParams</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>A helper to bind the provided callback to the <em>fetch</em> event of this model or if
no callback is provided it will trigger the event.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@fetch: </span><span class="nf">(callbackOrParams) -&gt;</span>
    <span class="k">if</span> <span class="k">typeof</span> <span class="nx">callbackOrParams</span> <span class="o">is</span> <span class="s">&#39;function&#39;</span>
      <span class="nx">@bind</span><span class="p">(</span><span class="s">&#39;fetch&#39;</span><span class="p">,</span> <span class="nx">callbackOrParams</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="nx">@trigger</span><span class="p">(</span><span class="s">&#39;fetch&#39;</span><span class="p">,</span> <span class="nx">callbackOrParams</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Will conver all model records to JSON using the <em>recordValues</em> method.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@toJSON: </span><span class="o">-&gt;</span>
    <span class="nx">@recordsValues</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Will convert a passed <em>Array</em> of attribute hashes or <em>JSON String</em> into
an array of <em>unsaved model records</em>.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@fromJSON: </span><span class="nf">(objects) -&gt;</span>
    <span class="k">return</span> <span class="nx">unless</span> <span class="nx">objects</span>
    <span class="k">if</span> <span class="k">typeof</span> <span class="nx">objects</span> <span class="o">is</span> <span class="s">&#39;string&#39;</span>
      <span class="nv">objects = </span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">objects</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">isArray</span><span class="p">(</span><span class="nx">objects</span><span class="p">)</span>
      <span class="p">(</span><span class="k">new</span> <span class="nx">@</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="k">for</span> <span class="nx">value</span> <span class="k">in</span> <span class="nx">objects</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="k">new</span> <span class="nx">@</span><span class="p">(</span><span class="nx">objects</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Helper that will serialize the content of a form and create a new
model record using the values.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@fromForm: </span><span class="o">-&gt;</span>
    <span class="p">(</span><span class="k">new</span> <span class="k">this</span><span class="p">).</span><span class="nx">fromForm</span><span class="p">(</span><span class="nx">arguments</span><span class="p">...)</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <h2>Private Methods</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Build an array of the models based on the internal <em>records</em> array.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@recordsValues: </span><span class="o">-&gt;</span>
    <span class="nv">result = </span><span class="p">[]</span>
    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">@records</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
    <span class="nx">result</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>Create an array of model clones.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@cloneArray: </span><span class="nf">(array) -&gt;</span>
    <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">clone</span><span class="p">()</span> <span class="k">for</span> <span class="nx">value</span> <span class="k">in</span> <span class="nx">array</span><span class="p">)</span>

  <span class="vi">@idCounter: </span><span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Generate a uid</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@uid: </span><span class="nf">(prefix = &#39;&#39;) -&gt;</span>
    <span class="nv">uid = </span><span class="nx">prefix</span> <span class="o">+</span> <span class="nx">@idCounter</span><span class="o">++</span>
    <span class="nv">uid = </span><span class="nx">@uid</span><span class="p">(</span><span class="nx">prefix</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@exists</span><span class="p">(</span><span class="nx">uid</span><span class="p">)</span>
    <span class="nx">uid</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <h2>Instance Methods</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Taking an attributes object, return a new model record</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">constructor: </span><span class="nf">(atts) -&gt;</span>
    <span class="k">super</span>
    <span class="nx">@load</span> <span class="nx">atts</span> <span class="k">if</span> <span class="nx">atts</span>
    <span class="vi">@cid = </span><span class="nx">@constructor</span><span class="p">.</span><span class="nx">uid</span><span class="p">(</span><span class="s">&#39;c-&#39;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Determie if this model already exists in the collection using the id.
Will return false if no ID is provided.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">isNew: </span><span class="o">-&gt;</span>
    <span class="o">not</span> <span class="nx">@exists</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>Helper for determining validity. If the validate method does
not return any issues the model is deemed valid.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">isValid: </span><span class="o">-&gt;</span>
    <span class="o">not</span> <span class="nx">@validate</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>Stub for validation. <em>Override to provide actual validation.</em></p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">validate: </span><span class="o">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p>Load in an attribute object to the current model.
If the attribute <em>key</em> references a function internally it will pass it
the <em>value</em> as an argument, else it will assign the <em>value</em> as a property.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">load: </span><span class="nf">(atts) -&gt;</span>
    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">atts</span>
      <span class="k">if</span> <span class="k">typeof</span> <span class="nx">@</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">is</span> <span class="s">&#39;function&#39;</span>
        <span class="nx">@</span><span class="p">[</span><span class="nx">key</span><span class="p">](</span><span class="nx">value</span><span class="p">)</span>
      <span class="k">else</span>
        <span class="nx">@</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>
    <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Using the initial list of attributes passed in via configure tis will return
an object with key / value pairs. If the attribute references a function, the value
will be the result of that function.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">attributes: </span><span class="o">-&gt;</span>
    <span class="nv">result = </span><span class="p">{}</span>
    <span class="k">for</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">@constructor</span><span class="p">.</span><span class="nx">attributes</span> <span class="k">when</span> <span class="nx">key</span> <span class="k">of</span> <span class="k">this</span>
      <span class="k">if</span> <span class="k">typeof</span> <span class="nx">@</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">is</span> <span class="s">&#39;function&#39;</span>
        <span class="nx">result</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">@</span><span class="p">[</span><span class="nx">key</span><span class="p">]()</span>
      <span class="k">else</span>
        <span class="nx">result</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">@</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span>
    <span class="nv">result.id = </span><span class="nx">@id</span> <span class="k">if</span> <span class="nx">@id</span>
    <span class="nx">result</span></pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <p>Using the constructor and ID or CID, determine if two model records match.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">eql: </span><span class="nf">(rec) -&gt;</span>
    <span class="o">!!</span><span class="p">(</span><span class="nx">rec</span> <span class="o">and</span> <span class="nx">rec</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">is</span> <span class="nx">@constructor</span> <span class="o">and</span>
        <span class="p">(</span><span class="nx">rec</span><span class="p">.</span><span class="nx">cid</span> <span class="o">is</span> <span class="nx">@cid</span><span class="p">)</span> <span class="o">or</span> <span class="p">(</span><span class="nx">rec</span><span class="p">.</span><span class="nx">id</span> <span class="o">and</span> <span class="nx">rec</span><span class="p">.</span><span class="nx">id</span> <span class="o">is</span> <span class="nx">@id</span><span class="p">))</span></pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <p>Save the current model. If the options.validate is set to false, skip validation.
The <em>error</em> event will be triggered on validation errors and the <em>beforeSave</em> and
<em>save</em> events will be triggered during the save process.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">save: </span><span class="nf">(options = {}) -&gt;</span>
    <span class="nx">unless</span> <span class="nx">options</span><span class="p">.</span><span class="nx">validate</span> <span class="o">is</span> <span class="kc">false</span>
      <span class="nv">error = </span><span class="nx">@validate</span><span class="p">()</span>
      <span class="k">if</span> <span class="nx">error</span>
        <span class="nx">@trigger</span><span class="p">(</span><span class="s">&#39;error&#39;</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">false</span>

    <span class="nx">@trigger</span><span class="p">(</span><span class="s">&#39;beforeSave&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="nv">record = </span><span class="k">if</span> <span class="nx">@isNew</span><span class="p">()</span> <span class="k">then</span> <span class="nx">@create</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="k">else</span> <span class="nx">@update</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
    <span class="nx">@trigger</span><span class="p">(</span><span class="s">&#39;save&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="nx">record</span></pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-51">&#182;</a>               </div>               <p>Update the internal attribute denoted by <em>name</em> with the provided <em>value</em>
and then call <em>save</em> on the record.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">updateAttribute: </span><span class="nf">(name, value, options) -&gt;</span>
    <span class="nx">@</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>
    <span class="nx">@save</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-52">&#182;</a>               </div>               <p>Update multiple attributes by loading in the <em>atts</em> values via the <em>load</em> method
and then calling <em>save</em> on the record.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">updateAttributes: </span><span class="nf">(atts, options) -&gt;</span>
    <span class="nx">@load</span><span class="p">(</span><span class="nx">atts</span><span class="p">)</span>
    <span class="nx">@save</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-53">&#182;</a>               </div>               <p>Change the <em>id</em> of the current record. This will update the internal references to
the record that use the id. It will <em>save</em> the record as part of the process.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">changeID: </span><span class="nf">(id) -&gt;</span>
    <span class="nv">records = </span><span class="nx">@constructor</span><span class="p">.</span><span class="nx">records</span>
    <span class="nx">records</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">records</span><span class="p">[</span><span class="nx">@id</span><span class="p">]</span>
    <span class="k">delete</span> <span class="nx">records</span><span class="p">[</span><span class="nx">@id</span><span class="p">]</span>
    <span class="vi">@id = </span><span class="nx">id</span>
    <span class="nx">@save</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-54">&#182;</a>               </div>               <p>Delete a record from all references / indexes and trigger events <em>beforeDestroy</em>,
<em>destroy</em> and <em>change</em> as part of the process. It will also unbind the record from
any linked callbacks and return the record itself at the end.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">destroy: </span><span class="nf">(options = {}) -&gt;</span>
    <span class="nx">@trigger</span><span class="p">(</span><span class="s">&#39;beforeDestroy&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="k">delete</span> <span class="nx">@constructor</span><span class="p">.</span><span class="nx">records</span><span class="p">[</span><span class="nx">@id</span><span class="p">]</span>
    <span class="k">delete</span> <span class="nx">@constructor</span><span class="p">.</span><span class="nx">crecords</span><span class="p">[</span><span class="nx">@cid</span><span class="p">]</span>
    <span class="vi">@destroyed = </span><span class="kc">true</span>
    <span class="nx">@trigger</span><span class="p">(</span><span class="s">&#39;destroy&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="nx">@trigger</span><span class="p">(</span><span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="s">&#39;destroy&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="nx">@unbind</span><span class="p">()</span>
    <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-55">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-55">&#182;</a>               </div>               <p>Duplicate the current record into a <em>new unsaved record</em>. If the <em>newRecord</em>
argument is false, then the current client side ID is maintained between
records, else the CID and ID are blanked.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">dup: </span><span class="nf">(newRecord) -&gt;</span>
    <span class="nv">result = </span><span class="k">new</span> <span class="nx">@constructor</span><span class="p">(</span><span class="nx">@attributes</span><span class="p">())</span>
    <span class="k">if</span> <span class="nx">newRecord</span> <span class="o">is</span> <span class="kc">false</span>
      <span class="nv">result.cid = </span><span class="nx">@cid</span>
    <span class="k">else</span>
      <span class="k">delete</span> <span class="nx">result</span><span class="p">.</span><span class="nx">id</span>
    <span class="nx">result</span></pre></div>             </td>           </tr>                               <tr id="section-56">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-56">&#182;</a>               </div>               <p>Create a clone of the current object which usese the current object
as the prototype for a new object allowing inheritance and overriding.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">clone: </span><span class="o">-&gt;</span>
    <span class="nx">createObject</span><span class="p">(</span><span class="k">this</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-57">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-57">&#182;</a>               </div>               <p>Return the current instance of the object if it is unsaved else find
the record by it's id and reload the original attributes into this record.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">reload: </span><span class="o">-&gt;</span>
    <span class="k">return</span> <span class="k">this</span> <span class="k">if</span> <span class="nx">@isNew</span><span class="p">()</span>
    <span class="nv">original = </span><span class="nx">@constructor</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">@id</span><span class="p">)</span>
    <span class="nx">@load</span><span class="p">(</span><span class="nx">original</span><span class="p">.</span><span class="nx">attributes</span><span class="p">())</span>
    <span class="nx">original</span></pre></div>             </td>           </tr>                               <tr id="section-58">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-58">&#182;</a>               </div>               <p>Return an attributes object from the current record.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">toJSON: </span><span class="o">-&gt;</span>
    <span class="nx">@attributes</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-59">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-59">&#182;</a>               </div>               <p>Convert the current record into a string of class name and
serialized object.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">toString: </span><span class="o">-&gt;</span>
    <span class="s">&quot;&lt;</span><span class="si">#{</span><span class="nx">@constructor</span><span class="p">.</span><span class="nx">className</span><span class="si">}</span><span class="s"> (</span><span class="si">#{</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="si">}</span><span class="s">)&gt;&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-60">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-60">&#182;</a>               </div>               <p>Convert a form into an attributes object and use that to
initialise a new model record.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">fromForm: </span><span class="nf">(form) -&gt;</span>
    <span class="nv">result = </span><span class="p">{}</span>
    <span class="k">for</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">$</span><span class="p">(</span><span class="nx">form</span><span class="p">).</span><span class="nx">serializeArray</span><span class="p">()</span>
      <span class="nx">result</span><span class="p">[</span><span class="nx">key</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">key</span><span class="p">.</span><span class="nx">value</span>
    <span class="nx">@load</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-61">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-61">&#182;</a>               </div>               <p>Return true if the current models ID is set and exists
in the current record set.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">exists: </span><span class="o">-&gt;</span>
    <span class="nx">@id</span> <span class="o">&amp;&amp;</span> <span class="nx">@id</span> <span class="k">of</span> <span class="nx">@constructor</span><span class="p">.</span><span class="nx">records</span></pre></div>             </td>           </tr>                               <tr id="section-62">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-62">&#182;</a>               </div>               <h2>Private Methods</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-63">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-63">&#182;</a>               </div>               <p>Using the current model instances ID, update the model of matching ID in the main record set
with the current models attributes. This allows for non-destructive changing of models
prior to calling save. The action will trigger the events <em>beforeUpdate</em>, <em>update</em> and <em>change</em>.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">update: </span><span class="nf">(options) -&gt;</span>
    <span class="nx">@trigger</span><span class="p">(</span><span class="s">&#39;beforeUpdate&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="nv">records = </span><span class="nx">@constructor</span><span class="p">.</span><span class="nx">records</span>
    <span class="nx">records</span><span class="p">[</span><span class="nx">@id</span><span class="p">].</span><span class="nx">load</span> <span class="nx">@attributes</span><span class="p">()</span>
    <span class="nv">clone = </span><span class="nx">records</span><span class="p">[</span><span class="nx">@id</span><span class="p">].</span><span class="nx">clone</span><span class="p">()</span>
    <span class="nx">clone</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s">&#39;update&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="nx">clone</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="s">&#39;update&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="nx">clone</span></pre></div>             </td>           </tr>                               <tr id="section-64">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-64">&#182;</a>               </div>               <p>Using the current model, create a new model record. The ID will be set to the current CID or the
ID if it is set. It will be a clone of the current model and trigger <em>beforeCreate</em>, <em>create</em> and
<em>change</em> events.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">create: </span><span class="nf">(options) -&gt;</span>
    <span class="nx">@trigger</span><span class="p">(</span><span class="s">&#39;beforeCreate&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="vi">@id          = </span><span class="nx">@cid</span> <span class="nx">unless</span> <span class="nx">@id</span>

    <span class="nv">record       = </span><span class="nx">@dup</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
    <span class="nx">@constructor</span><span class="p">.</span><span class="nx">records</span><span class="p">[</span><span class="nx">@id</span><span class="p">]</span>   <span class="o">=</span> <span class="nx">record</span>
    <span class="nx">@constructor</span><span class="p">.</span><span class="nx">crecords</span><span class="p">[</span><span class="nx">@cid</span><span class="p">]</span> <span class="o">=</span> <span class="nx">record</span>

    <span class="nv">clone        = </span><span class="nx">record</span><span class="p">.</span><span class="nx">clone</span><span class="p">()</span>
    <span class="nx">clone</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s">&#39;create&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="nx">clone</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="s">&#39;create&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="nx">clone</span></pre></div>             </td>           </tr>                               <tr id="section-65">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-65">&#182;</a>               </div>               <p>Bind the current model to the provided <em>events</em> array triggering the provided <em>callback</em> function.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">bind: </span><span class="nf">(events, callback) -&gt;</span>
    <span class="nx">@constructor</span><span class="p">.</span><span class="nx">bind</span> <span class="nx">events</span><span class="p">,</span> <span class="nv">binder = </span><span class="p">(</span><span class="nx">record</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="k">if</span> <span class="nx">record</span> <span class="o">&amp;&amp;</span> <span class="nx">@eql</span><span class="p">(</span><span class="nx">record</span><span class="p">)</span>
        <span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
    <span class="nx">@constructor</span><span class="p">.</span><span class="nx">bind</span> <span class="s">&#39;unbind&#39;</span><span class="p">,</span> <span class="nv">unbinder = </span><span class="p">(</span><span class="nx">record</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="k">if</span> <span class="nx">record</span> <span class="o">&amp;&amp;</span> <span class="nx">@eql</span><span class="p">(</span><span class="nx">record</span><span class="p">)</span>
        <span class="nx">@constructor</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">events</span><span class="p">,</span> <span class="nx">binder</span><span class="p">)</span>
        <span class="nx">@constructor</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s">&#39;unbind&#39;</span><span class="p">,</span> <span class="nx">unbinder</span><span class="p">)</span>
    <span class="nx">binder</span>

  <span class="nv">one: </span><span class="nf">(events, callback) -&gt;</span>
    <span class="nv">binder = </span><span class="nx">@bind</span> <span class="nx">events</span><span class="p">,</span> <span class="o">=&gt;</span>
      <span class="nx">@constructor</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">events</span><span class="p">,</span> <span class="nx">binder</span><span class="p">)</span>
      <span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>

  <span class="nv">trigger: </span><span class="nf">(args...) -&gt;</span>
    <span class="nx">args</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
    <span class="nx">@constructor</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="nx">args</span><span class="p">...)</span>

  <span class="nv">unbind: </span><span class="o">-&gt;</span>
    <span class="nx">@trigger</span><span class="p">(</span><span class="s">&#39;unbind&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nx">Controller</span> <span class="k">extends</span> <span class="nx">Module</span>
  <span class="nx">@include</span> <span class="nx">Events</span>
  <span class="nx">@include</span> <span class="nx">Log</span>

  <span class="nv">eventSplitter: </span><span class="sr">/^(\S+)\s*(.*)$/</span>
  <span class="nv">tag: </span><span class="s">&#39;div&#39;</span>

  <span class="nv">constructor: </span><span class="nf">(options) -&gt;</span>
    <span class="vi">@options = </span><span class="nx">options</span>

    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">@options</span>
      <span class="nx">@</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>

    <span class="vi">@el  = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">@tag</span><span class="p">)</span> <span class="nx">unless</span> <span class="nx">@el</span>
    <span class="vi">@el  = </span><span class="nx">$</span><span class="p">(</span><span class="nx">@el</span><span class="p">)</span>
    <span class="vi">@$el = </span><span class="nx">@el</span>

    <span class="nx">@el</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">@className</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@className</span>
    <span class="nx">@el</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">@attributes</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@attributes</span>

    <span class="vi">@events = </span><span class="nx">@constructor</span><span class="p">.</span><span class="nx">events</span> <span class="nx">unless</span> <span class="nx">@events</span>
    <span class="vi">@elements = </span><span class="nx">@constructor</span><span class="p">.</span><span class="nx">elements</span> <span class="nx">unless</span> <span class="nx">@elements</span>

    <span class="nx">@delegateEvents</span><span class="p">(</span><span class="nx">@events</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@events</span>
    <span class="nx">@refreshElements</span><span class="p">()</span> <span class="k">if</span> <span class="nx">@elements</span>

    <span class="k">super</span>

  <span class="nv">release: </span><span class="o">=&gt;</span>
    <span class="nx">@trigger</span> <span class="s">&#39;release&#39;</span>
    <span class="nx">@el</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span>
    <span class="nx">@unbind</span><span class="p">()</span>

  <span class="nv">$: </span><span class="nf">(selector) -&gt;</span> <span class="nx">$</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">@el</span><span class="p">)</span>

  <span class="nv">delegateEvents: </span><span class="nf">(events) -&gt;</span>
    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">method</span> <span class="k">of</span> <span class="nx">events</span>

      <span class="k">if</span> <span class="k">typeof</span><span class="p">(</span><span class="nx">method</span><span class="p">)</span> <span class="o">is</span> <span class="s">&#39;function&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-66">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-66">&#182;</a>               </div>               <p>Always return true from event handlers</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">method = </span><span class="nx">do</span> <span class="p">(</span><span class="nx">method</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">=&gt;</span>
          <span class="nx">method</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
          <span class="kc">true</span>
      <span class="k">else</span>
        <span class="nx">unless</span> <span class="nx">@</span><span class="p">[</span><span class="nx">method</span><span class="p">]</span>
          <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s">&quot;</span><span class="si">#{</span><span class="nx">method</span><span class="si">}</span><span class="s"> doesn&#39;t exist&quot;</span><span class="p">)</span>

        <span class="nv">method = </span><span class="nx">do</span> <span class="p">(</span><span class="nx">method</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">=&gt;</span>
          <span class="nx">@</span><span class="p">[</span><span class="nx">method</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
          <span class="kc">true</span>

      <span class="nv">match      = </span><span class="nx">key</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">@eventSplitter</span><span class="p">)</span>
      <span class="nv">eventName  = </span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
      <span class="nv">selector   = </span><span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

      <span class="k">if</span> <span class="nx">selector</span> <span class="o">is</span> <span class="s">&#39;&#39;</span>
        <span class="nx">@el</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">method</span><span class="p">)</span>
      <span class="k">else</span>
        <span class="nx">@el</span><span class="p">.</span><span class="nx">delegate</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">,</span> <span class="nx">method</span><span class="p">)</span>

  <span class="nv">refreshElements: </span><span class="o">-&gt;</span>
    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">@elements</span>
      <span class="nx">@</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">=</span> <span class="nx">@$</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>

  <span class="nv">delay: </span><span class="nf">(func, timeout) -&gt;</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">@proxy</span><span class="p">(</span><span class="nx">func</span><span class="p">),</span> <span class="nx">timeout</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span>

  <span class="nv">html: </span><span class="nf">(element) -&gt;</span>
    <span class="nx">@el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">el</span> <span class="o">or</span> <span class="nx">element</span><span class="p">)</span>
    <span class="nx">@refreshElements</span><span class="p">()</span>
    <span class="nx">@el</span>

  <span class="nv">append: </span><span class="nf">(elements...) -&gt;</span>
    <span class="nv">elements = </span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">el</span> <span class="o">or</span> <span class="nx">e</span> <span class="k">for</span> <span class="nx">e</span> <span class="k">in</span> <span class="nx">elements</span><span class="p">)</span>
    <span class="nx">@el</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">elements</span><span class="p">...)</span>
    <span class="nx">@refreshElements</span><span class="p">()</span>
    <span class="nx">@el</span>

  <span class="nv">appendTo: </span><span class="nf">(element) -&gt;</span>
    <span class="nx">@el</span><span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">el</span> <span class="o">or</span> <span class="nx">element</span><span class="p">)</span>
    <span class="nx">@refreshElements</span><span class="p">()</span>
    <span class="nx">@el</span>

  <span class="nv">prepend: </span><span class="nf">(elements...) -&gt;</span>
    <span class="nv">elements = </span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">el</span> <span class="o">or</span> <span class="nx">e</span> <span class="k">for</span> <span class="nx">e</span> <span class="k">in</span> <span class="nx">elements</span><span class="p">)</span>
    <span class="nx">@el</span><span class="p">.</span><span class="nx">prepend</span><span class="p">(</span><span class="nx">elements</span><span class="p">...)</span>
    <span class="nx">@refreshElements</span><span class="p">()</span>
    <span class="nx">@el</span>

  <span class="nv">replace: </span><span class="nf">(element) -&gt;</span>
    <span class="p">[</span><span class="nx">previous</span><span class="p">,</span> <span class="nx">@el</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">@el</span><span class="p">,</span> <span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">el</span> <span class="o">or</span> <span class="nx">element</span><span class="p">)]</span>
    <span class="nx">previous</span><span class="p">.</span><span class="nx">replaceWith</span><span class="p">(</span><span class="nx">@el</span><span class="p">)</span>
    <span class="nx">@delegateEvents</span><span class="p">(</span><span class="nx">@events</span><span class="p">)</span>
    <span class="nx">@refreshElements</span><span class="p">()</span>
    <span class="nx">@el</span></pre></div>             </td>           </tr>                               <tr id="section-67">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-67">&#182;</a>               </div>               <p>Utilities &amp; Shims</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">$ = </span><span class="nb">window</span><span class="o">?</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">or</span> <span class="nb">window</span><span class="o">?</span><span class="p">.</span><span class="nx">Zepto</span> <span class="o">or</span> <span class="nf">(element) -&gt;</span> <span class="nx">element</span>

<span class="nv">createObject = </span><span class="nb">Object</span><span class="p">.</span><span class="nx">create</span> <span class="o">or</span> <span class="nf">(o) -&gt;</span>
  <span class="nv">Func = </span><span class="o">-&gt;</span>
  <span class="nv">Func.prototype = </span><span class="nx">o</span>
  <span class="k">new</span> <span class="nx">Func</span><span class="p">()</span>

<span class="nv">isArray = </span><span class="nf">(value) -&gt;</span>
  <span class="nb">Object</span><span class="o">::</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">is</span> <span class="s">&#39;[object Array]&#39;</span>

<span class="nv">isBlank = </span><span class="nf">(value) -&gt;</span>
  <span class="k">return</span> <span class="kc">true</span> <span class="nx">unless</span> <span class="nx">value</span>
  <span class="k">return</span> <span class="kc">false</span> <span class="k">for</span> <span class="nx">key</span> <span class="k">of</span> <span class="nx">value</span>
  <span class="kc">true</span>

<span class="nv">makeArray = </span><span class="nf">(args) -&gt;</span>
  <span class="nb">Array</span><span class="o">::</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-68">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-68">&#182;</a>               </div>               <p>Globals</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Spine = </span><span class="vi">@Spine   = </span><span class="p">{}</span>
<span class="nx">module</span><span class="o">?</span><span class="p">.</span><span class="nv">exports  = </span><span class="nx">Spine</span>

<span class="nv">Spine.version    = </span><span class="s">&#39;1.0.8&#39;</span>
<span class="nv">Spine.isArray    = </span><span class="nx">isArray</span>
<span class="nv">Spine.isBlank    = </span><span class="nx">isBlank</span>
<span class="nx">Spine</span><span class="p">.</span><span class="nv">$          = </span><span class="nx">$</span>
<span class="nv">Spine.Events     = </span><span class="nx">Events</span>
<span class="nv">Spine.Log        = </span><span class="nx">Log</span>
<span class="nv">Spine.Module     = </span><span class="nx">Module</span>
<span class="nv">Spine.Controller = </span><span class="nx">Controller</span>
<span class="nv">Spine.Model      = </span><span class="nx">Model</span></pre></div>             </td>           </tr>                               <tr id="section-69">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-69">&#182;</a>               </div>               <p>Global events</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Module</span><span class="p">.</span><span class="nx">extend</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">Spine</span><span class="p">,</span> <span class="nx">Events</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-70">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-70">&#182;</a>               </div>               <p>JavaScript compatability</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Module.create = Module.sub =</span>
  <span class="nv">Controller.create = Controller.sub =</span>
    <span class="nv">Model.sub = </span><span class="nf">(instances, statics) -&gt;</span>
      <span class="k">class</span> <span class="nx">result</span> <span class="k">extends</span> <span class="k">this</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="nx">instances</span><span class="p">)</span> <span class="k">if</span> <span class="nx">instances</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">statics</span><span class="p">)</span> <span class="k">if</span> <span class="nx">statics</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">unbind</span><span class="o">?</span><span class="p">()</span>
      <span class="nx">result</span>

<span class="nv">Model.setup = </span><span class="nf">(name, attributes = []) -&gt;</span>
  <span class="k">class</span> <span class="nx">Instance</span> <span class="k">extends</span> <span class="k">this</span>
  <span class="nx">Instance</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">attributes</span><span class="p">...)</span>
  <span class="nx">Instance</span>

<span class="nv">Spine.Class = </span><span class="nx">Module</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 